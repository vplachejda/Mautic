{"version":3,"sources":["webpack://grapesjs-preset-mautic/webpack/universalModuleDefinition","webpack://grapesjs-preset-mautic/webpack/bootstrap","webpack://grapesjs-preset-mautic/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://grapesjs-preset-mautic/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://grapesjs-preset-mautic/./node_modules/@babel/runtime/helpers/createClass.js","webpack://grapesjs-preset-mautic/./src/codeEditor.js","webpack://grapesjs-preset-mautic/./src/commands.js","webpack://grapesjs-preset-mautic/./src/buttons.js","webpack://grapesjs-preset-mautic/./src/blocks.js","webpack://grapesjs-preset-mautic/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","CodeEditor","editor","opts","this","codeEditor","buildCodeEditor","codePopup","buildCodePopup","CodeManager","getViewer","clone","set","codeName","readOnly","theme","autoBeautify","autoCloseTags","autoCloseBrackets","lineWrapping","styleActiveLine","smartIndent","indentWithTabs","cfg","getConfig","document","createElement","btnEdit","textarea","innerHTML","sourceEditBtnLabel","className","stylePrefix","onclick","updateCode","appendChild","init","updateEditorContents","Modal","setContent","setTitle","sourceEditModalTitle","refresh","open","code","getValue","DomComponents","getWrapper","setComponents","trim","close","content","mjmlTemplate","getHtml","getCss","avoidProtected","cmd","Commands","add","run","sender","showCodePopup","$","mQuery","pm","Panels","sourceEdit","addButton","id","command","attributes","title","showImportButton","mjmlImportBtn","getButton","htmlImportBtn","pageImportBtn","removeButton","undo","redo","runCommand","preview","clear","toggleImages","on","showLayersManager","openLayersBtn","style","viewComponents","openTmBtn","openSm","traitsSector","traitsProps","find","append","before","traitStyle","hidden","display","openBlocksBtn","bm","BlockManager","blocks","getAll","forEach","block","category","categoryBlockLabel","categorySectionLabel","class","remove","am","AssetManager","config","deleteAssetConfirmText","replaceRteWithFroala","dynamicContentBlockLabel","plugins","includes","addType","view","onRemove","e","stopImmediatePropagation","model","confirm","collection","FroalaEditor","rteToolbar","RichTextEditor","getToolbarEl","children","child","setCustomRte","enable","el","rte","froalaEditor","enter","ENTER_BR","pastePlain","htmlAllowedTags","htmlAllowedAttrs","toolbarButtons","toolbarContainer","linkEditButtons","currentLink","popupLink","top","getBoundingClientRect","height","outerHeight","css","parseInt","disable","off","loadCommands","loadButtons","loadBlocks"],"mappings":"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","file":"grapesjs-preset-mautic.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-preset-mautic\"] = factory();\n\telse\n\t\troot[\"grapesjs-preset-mautic\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","class CodeEditor {\r\n    constructor(editor, opts = {}) {\r\n        this.editor = editor;\r\n        this.opts = opts;\r\n\r\n        this.codeEditor = this.buildCodeEditor();\r\n        this.codePopup = this.buildCodePopup();\r\n    }\r\n\r\n    buildCodeEditor() {\r\n        let codeEditor = this.editor.CodeManager.getViewer('CodeMirror').clone();\r\n\r\n        codeEditor.set({\r\n            codeName: 'htmlmixed',\r\n            readOnly: false,\r\n            theme: 'hopscotch',\r\n            autoBeautify: true,\r\n            autoCloseTags: true,\r\n            autoCloseBrackets: true,\r\n            lineWrapping: true,\r\n            styleActiveLine: true,\r\n            smartIndent: true,\r\n            indentWithTabs: true\r\n        });\r\n\r\n        return codeEditor;\r\n    }\r\n\r\n    buildCodePopup() {\r\n        const cfg = this.editor.getConfig();\r\n\r\n        let codePopup = document.createElement('div');\r\n        let btnEdit = document.createElement('button');\r\n        let textarea = document.createElement('textarea');\r\n\r\n        btnEdit.innerHTML = this.opts.sourceEditBtnLabel;\r\n        btnEdit.className = cfg.stylePrefix + 'btn-prim ' + cfg.stylePrefix + 'btn-code-edit';\r\n        btnEdit.onclick = this.updateCode.bind(this);\r\n\r\n        codePopup.appendChild(textarea);\r\n        codePopup.appendChild(btnEdit);\r\n\r\n        this.codeEditor.init(textarea);\r\n        this.updateEditorContents();\r\n\r\n        return codePopup;\r\n    }\r\n\r\n    showCodePopup() {\r\n        this.editor.Modal.setContent('');\r\n        this.editor.Modal.setContent(this.codePopup);\r\n        this.editor.Modal.setTitle(this.opts.sourceEditModalTitle);\r\n\r\n        this.updateEditorContents();\r\n        this.codeEditor.editor.refresh();\r\n\r\n        this.editor.Modal.open();\r\n    }\r\n\r\n    updateCode() {\r\n        let code = this.codeEditor.editor.getValue();\r\n\r\n        this.editor.DomComponents.getWrapper().set('content', '');\r\n        this.editor.setComponents(code.trim());\r\n\r\n        this.editor.Modal.close();\r\n    }\r\n\r\n    updateEditorContents() {\r\n        let content;\r\n\r\n        if (this.opts.mjmlTemplate) {\r\n            content = this.editor.getHtml();\r\n        } else {\r\n            content = this.editor.getHtml() + '<style>' + this.editor.getCss({avoidProtected: true}) + '</style>';\r\n        }\r\n\r\n        this.codeEditor.setContent(content);\r\n    }\r\n}\r\n\r\nexport default CodeEditor\r\n","import CodeEditor from './codeEditor';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const cmd = editor.Commands;\r\n\r\n    let codeEditor = null;\r\n\r\n    cmd.add('preset-mautic:code-edit', {\r\n        run: (editor, sender) => {\r\n            if (!codeEditor) codeEditor = new CodeEditor(editor, opts);\r\n\r\n            sender && sender.set('active', 0);\r\n            codeEditor.showCodePopup()\r\n        }\r\n    });\r\n};\r\n","export default (editor, opts = {}) => {\r\n    const $ = mQuery;\r\n    const pm = editor.Panels;\r\n\r\n    // Add function within builder to edit source code\r\n    if (opts.sourceEdit) {\r\n        pm.addButton('options', [\r\n            {\r\n                id: 'code-edit',\r\n                className: 'fa fa-edit',\r\n                command: 'preset-mautic:code-edit',\r\n                attributes: {\r\n                    title: opts.sourceEditModalTitle\r\n                }\r\n            }\r\n        ]);\r\n    }\r\n\r\n    // Disable Import code button\r\n    if (!opts.showImportButton) {\r\n        let mjmlImportBtn = pm.getButton('options', 'mjml-import');\r\n        let htmlImportBtn = pm.getButton('options', 'gjs-open-import-template');\r\n        let pageImportBtn = pm.getButton('options', 'gjs-open-import-webpage');\r\n\r\n        if (mjmlImportBtn !== null) {\r\n            pm.removeButton('options', 'mjml-import');\r\n        }\r\n\r\n        if (htmlImportBtn !== null) {\r\n            pm.removeButton('options', 'gjs-open-import-template');\r\n        }\r\n\r\n        if (pageImportBtn !== null) {\r\n            pm.removeButton('options', 'gjs-open-import-webpage');\r\n        }\r\n    }\r\n\r\n    // Move Undo & Redo inside Commands Panel\r\n    let undo = pm.getButton('options', 'undo');\r\n    let redo = pm.getButton('options', 'redo');\r\n\r\n    if (undo !== null) {\r\n        pm.removeButton('options', 'undo');\r\n        pm.addButton('commands', [\r\n            {\r\n                id: 'undo',\r\n                className: 'fa fa-undo',\r\n                attributes: {title: 'Undo'},\r\n                command: function () { editor.runCommand('core:undo') }\r\n            }\r\n        ]);\r\n    }\r\n\r\n    if (redo !== null) {\r\n        pm.removeButton('options', 'redo');\r\n        pm.addButton('commands', [\r\n            {\r\n                id: 'redo',\r\n                className: 'fa fa-repeat',\r\n                attributes: {title: 'Redo'},\r\n                command: function () { editor.runCommand('core:redo') }\r\n            }\r\n        ]);\r\n    }\r\n\r\n    // Remove preview button\r\n    let preview = pm.getButton('options', 'preview');\r\n\r\n    if (preview !== null) {\r\n        pm.removeButton('options', 'preview');\r\n    }\r\n\r\n    // Remove clear button\r\n    let clear = pm.getButton('options', 'canvas-clear');\r\n\r\n    if (clear !== null) {\r\n        pm.removeButton('options', 'canvas-clear');\r\n    }\r\n\r\n    // Remove toggle images button\r\n    let toggleImages = pm.getButton('options', 'gjs-toggle-images');\r\n\r\n    if (toggleImages !== null) {\r\n        pm.removeButton('options', 'gjs-toggle-images');\r\n    }\r\n\r\n    // Do stuff on load\r\n    editor.on('load', function() {\r\n        // Hide Layers Manager\r\n        if (!opts.showLayersManager) {\r\n            let openLayersBtn = pm.getButton('views', 'open-layers');\r\n\r\n            if (openLayersBtn !== null) {\r\n                openLayersBtn.set('attributes', {\r\n                    style: 'display:none;',\r\n                });\r\n            }\r\n        }\r\n\r\n        // Activate by default View Components button\r\n        let viewComponents = pm.getButton('options', 'sw-visibility');\r\n        viewComponents && viewComponents.set('active', 1);\r\n\r\n        // Load and show settings and style manager\r\n        let openTmBtn = pm.getButton('views', 'open-tm');\r\n        openTmBtn && openTmBtn.set('active', 1);\r\n        let openSm = pm.getButton('views', 'open-sm');\r\n        openSm && openSm.set('active', 1);\r\n\r\n        pm.removeButton(\"views\", \"open-tm\");\r\n\r\n        // Add Settings Sector\r\n        let traitsSector = $('<div class=\"gjs-sm-sector no-select\">'+\r\n            '<div class=\"gjs-sm-title\"><span class=\"icon-settings fa fa-cog\"></span> Settings</div>' +\r\n            '<div class=\"gjs-sm-properties\" style=\"display: none;\"></div></div>');\r\n        let traitsProps = traitsSector.find('.gjs-sm-properties');\r\n\r\n        traitsProps.append($('.gjs-trt-traits'));\r\n        $('.gjs-sm-sectors').before(traitsSector);\r\n        traitsSector.find('.gjs-sm-title').on('click', function(){\r\n            let traitStyle = traitsProps.get(0).style;\r\n            let hidden = traitStyle.display === 'none';\r\n\r\n            if (hidden) {\r\n                traitStyle.display = 'block';\r\n            } else {\r\n                traitStyle.display = 'none';\r\n            }\r\n        });\r\n\r\n        // Open settings\r\n        traitsProps.get(0).style.display = 'block';\r\n\r\n        // Open block manager\r\n        let openBlocksBtn = editor.Panels.getButton('views', 'open-blocks');\r\n        openBlocksBtn && openBlocksBtn.set('active', 1);\r\n    });\r\n};\r\n","export default (editor, opts = {}) => {\r\n    const bm = editor.BlockManager;\r\n\r\n    let blocks = bm.getAll();\r\n\r\n    // All block inside Blocks category\r\n    blocks.forEach(block => {\r\n        block.set({\r\n            category: opts.categoryBlockLabel\r\n        });\r\n    });\r\n\r\n    /*\r\n     Custom block inside Sections category\r\n     */\r\n\r\n    // MJML columns\r\n    if (typeof bm.get('mj-1-column') !== 'undefined') {\r\n        bm.get('mj-1-column').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('mj-2-columns') !== 'undefined') {\r\n        bm.get('mj-2-columns').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('mj-3-columns') !== 'undefined') {\r\n        bm.get('mj-3-columns').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    // Newsletter columns\r\n    if (typeof bm.get('sect100') !== 'undefined') {\r\n        bm.get('sect100').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('sect50') !== 'undefined') {\r\n        bm.get('sect50').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('sect30') !== 'undefined') {\r\n        bm.get('sect30').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('sect37') !== 'undefined') {\r\n        bm.get('sect37').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    // Webpage columns\r\n    if (typeof bm.get('column1') !== 'undefined') {\r\n        bm.get('column1').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('column2') !== 'undefined') {\r\n        bm.get('column2').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('column3') !== 'undefined') {\r\n        bm.get('column3').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    if (typeof bm.get('column3-7') !== 'undefined') {\r\n        bm.get('column3-7').set({\r\n            category: opts.categorySectionLabel\r\n        });\r\n    }\r\n\r\n    // Add icon to mj-hero\r\n    if (typeof bm.get('mj-hero') !== 'undefined') {\r\n        bm.get('mj-hero').set({\r\n            attributes: { class: 'gjs-fonts gjs-f-hero' },\r\n        });\r\n    }\r\n\r\n    // Delete mj-wrapper\r\n    if (typeof bm.get('mj-wrapper') !== 'undefined') {\r\n        bm.remove('mj-wrapper');\r\n    }\r\n};\r\n","import loadCommands from './commands';\r\nimport loadButtons from './buttons';\r\nimport loadBlocks from './blocks';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const $ = mQuery;\r\n    const am = editor.AssetManager;\r\n    const cfg = editor.getConfig();\r\n\r\n    let config = {\r\n        sourceEdit: 1,\r\n        sourceEditBtnLabel: 'Edit',\r\n        sourceEditModalTitle: 'Edit code',\r\n        deleteAssetConfirmText: 'Are you sure?',\r\n        showLayersManager: 0,\r\n        showImportButton: 0,\r\n        mjmlTemplate: false,\r\n        replaceRteWithFroala: true,\r\n        categorySectionLabel: 'Sections',\r\n        categoryBlockLabel: 'Blocks',\r\n        dynamicContentBlockLabel: 'Dynamic Content',\r\n        ...opts,\r\n    };\r\n\r\n    // Check if MJML plugin is on\r\n    if (cfg.plugins.includes('grapesjs-mjml')) {\r\n        config.mjmlTemplate = true;\r\n    }\r\n\r\n    // Extend the original `image` and add a confirm dialog before removing it\r\n    am.addType('image', {\r\n        // As you adding on top of an already defined type you can avoid indicating\r\n        // `am.getType('image').view.extend({...` the editor will do it by default\r\n        // but you can eventually extend some other type\r\n        view: {\r\n            // If you want to see more methods to extend check out\r\n            // https://github.com/artf/grapesjs/blob/dev/src/asset_manager/view/AssetImageView.js\r\n            onRemove(e) {\r\n                e.stopImmediatePropagation();\r\n                const model = this.model;\r\n\r\n                if (confirm(config.deleteAssetConfirmText)) {\r\n                    model.collection.remove(model);\r\n                }\r\n            }\r\n        },\r\n    });\r\n\r\n    if (config.replaceRteWithFroala && typeof $.FroalaEditor !== 'undefined') {\r\n        // Hiding other toolbars already created\r\n        let rteToolbar = editor.RichTextEditor.getToolbarEl();\r\n        [].forEach.call(rteToolbar.children, (child) => {\r\n            child.style.display = 'none';\r\n        });\r\n\r\n        editor.setCustomRte({\r\n            enable: function(el, rte) {\r\n                rte = $(el).froalaEditor({\r\n                    enter: $.FroalaEditor.ENTER_BR,\r\n                    pastePlain: true,\r\n\r\n                    htmlAllowedTags: ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'blockquote', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'pre', 'progress', 'queue', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'style', 'section', 'select', 'small', 'source', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', 'center'],\r\n                    htmlAllowedAttrs: ['data-atwho-at-query', 'data-section', 'data-section-wrapper', 'accept', 'accept-charset', 'accesskey', 'action', 'align', 'allowfullscreen', 'alt', 'async', 'autocomplete', 'autofocus', 'autoplay', 'autosave', 'background', 'bgcolor', 'border', 'charset', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'color', 'cols', 'colspan', 'content', 'contenteditable', 'contextmenu', 'controls', 'coords', 'data', 'data-.*', 'datetime', 'default', 'defer', 'dir', 'dirname', 'disabled', 'download', 'draggable', 'dropzone', 'enctype', 'for', 'form', 'formaction', 'frameborder', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'http-equiv', 'icon', 'id', 'ismap', 'itemprop', 'keytype', 'kind', 'label', 'lang', 'language', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'mozallowfullscreen', 'multiple', 'name', 'novalidate', 'open', 'optimum', 'pattern', 'ping', 'placeholder', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'reversed', 'rows', 'rowspan', 'sandbox', 'scope', 'scoped', 'scrolling', 'seamless', 'selected', 'shape', 'size', 'sizes', 'span', 'src', 'srcdoc', 'srclang', 'srcset', 'start', 'step', 'summary', 'spellcheck', 'style', 'tabindex', 'target', 'title', 'type', 'translate', 'usemap', 'value', 'valign', 'webkitallowfullscreen', 'width', 'wrap'],\r\n\r\n                    toolbarButtons: ['bold', 'italic', 'underline', 'strikeThrough', 'quote', 'clearFormatting', '-', 'formatOL', 'formatUL', 'indent', 'outdent', 'token', 'insertLink'],\r\n\r\n                    toolbarContainer: editor.RichTextEditor.getToolbarEl(),\r\n                    linkEditButtons: ['linkOpen', 'linkRemove'],\r\n                });\r\n\r\n                $(el).on('froalaEditor.popups.show.link.edit', function (e, editor) {\r\n                    // Get the link DOM object of the current selection.\r\n                    let currentLink = $(el).froalaEditor('link.get');\r\n\r\n                    // Get popup link.edit\r\n                    let popupLink = $(el).froalaEditor('popups.get', 'link.edit');\r\n\r\n                    if (typeof currentLink !== 'undefined') {\r\n                        let top = currentLink.getBoundingClientRect().top;\r\n                        let height = $(currentLink).outerHeight();\r\n\r\n                        // Set position of popup\r\n                        popupLink.css('top', parseInt(top) + parseInt(height) + 35);\r\n                    }\r\n                });\r\n\r\n                return rte;\r\n            },\r\n            disable: function(el, rte) {\r\n                // Remove events and destroy rte\r\n                $(el).off('froalaEditor.popups.show.link.edit');\r\n                $(el).froalaEditor('destroy');\r\n            },\r\n        });\r\n    }\r\n\r\n    loadCommands(editor, config);\r\n    loadButtons(editor, config);\r\n    loadBlocks(editor, config);\r\n};\r\n"],"sourceRoot":""}