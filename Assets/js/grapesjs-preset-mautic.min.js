/*! grapesjs-preset-mautic - 1.0.142 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["grapesjs-preset-mautic"]=t():e["grapesjs-preset-mautic"]=t()}(window,(function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&t&&'string'!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,'a',t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},function(e,t,o){"use strict";o.r(t);var n=o(0),r=o.n(n),i=o(1),a=o.n(i),s=o(2),l=o.n(s),c=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(this,e),this.editor=t,this.opts=o,this.codeEditor=this.buildCodeEditor(),this.codePopup=this.buildCodePopup()}return l()(e,[{key:"buildCodeEditor",value:function(){var e=this.editor.CodeManager.getViewer('CodeMirror').clone();return e.set({codeName:'htmlmixed',readOnly:!1,theme:'hopscotch',autoBeautify:!0,autoCloseTags:!0,autoCloseBrackets:!0,lineWrapping:!0,styleActiveLine:!0,smartIndent:!0,indentWithTabs:!0}),e}},{key:"buildCodePopup",value:function(){var e=this.editor.getConfig(),t=document.createElement('div'),o=document.createElement('button'),n=document.createElement('textarea');return o.innerHTML=this.opts.sourceEditBtnLabel,o.className=e.stylePrefix+'btn-prim '+e.stylePrefix+'btn-code-edit',o.onclick=this.updateCode.bind(this),t.appendChild(n),t.appendChild(o),this.codeEditor.init(n),this.updateEditorContents(),t}},{key:"showCodePopup",value:function(){this.editor.Modal.setContent(''),this.editor.Modal.setContent(this.codePopup),this.editor.Modal.setTitle(this.opts.sourceEditModalTitle),this.updateEditorContents(),this.codeEditor.editor.refresh(),this.editor.Modal.open()}},{key:"updateCode",value:function(){var e=this.codeEditor.editor.getValue();this.editor.DomComponents.getWrapper().set('content',''),this.editor.setComponents(e.trim()),this.editor.Modal.close()}},{key:"updateEditorContents",value:function(){var e;e=this.opts.mjmlTemplate?this.editor.getHtml():this.editor.getHtml()+'<style>'+this.editor.getCss({avoidProtected:!0})+'</style>',this.codeEditor.setContent(e)}}]),e}(),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.Commands,n=null;o.add('code-edit',{run:function(e,o){n||(n=new c(e,t)),o&&o.set('active',0),n.showCodePopup()}})},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=mQuery,n=e.Panels;if(t.sourceEdit&&n.addButton('options',[{id:'code-edit',className:'fa fa-edit',command:'code-edit',attributes:{title:t.sourceEditModalTitle}}]),!t.showImportButton){var r=n.getButton('options','mjml-import'),i=n.getButton('options','gjs-open-import-template'),a=n.getButton('options','gjs-open-import-webpage');null!==r&&n.removeButton('options','mjml-import'),null!==i&&n.removeButton('options','gjs-open-import-template'),null!==a&&n.removeButton('options','gjs-open-import-webpage')}var s=n.getButton('options','undo'),l=n.getButton('options','redo');null!==s&&(n.removeButton('options','undo'),n.addButton('commands',[{id:'undo',className:'fa fa-undo',attributes:{title:'Undo'},command:function(){e.runCommand('core:undo')}}])),null!==l&&(n.removeButton('options','redo'),n.addButton('commands',[{id:'redo',className:'fa fa-repeat',attributes:{title:'Redo'},command:function(){e.runCommand('core:redo')}}]));var c=n.getButton('options','preview');null!==c&&n.removeButton('options','preview');var d=n.getButton('options','canvas-clear');null!==d&&n.removeButton('options','canvas-clear');var u=n.getButton('options','gjs-toggle-images');null!==u&&n.removeButton('options','gjs-toggle-images'),e.on('load',(function(){if(!t.showLayersManager){var r=n.getButton('views','open-layers');null!==r&&r.set('attributes',{style:'display:none;'})}var i=n.getButton('options','sw-visibility');i&&i.set('active',1);var a=n.getButton('views','open-tm');a&&a.set('active',1);var s=n.getButton('views','open-sm');s&&s.set('active',1),n.removeButton("views","open-tm");var l=o("<div class=\"gjs-sm-sector no-select\"><div class=\"gjs-sm-title\"><span class=\"icon-settings fa fa-cog\"></span> Settings</div><div class=\"gjs-sm-properties\" style=\"display: none;\"></div></div>"),c=l.find('.gjs-sm-properties');c.append(o('.gjs-trt-traits')),o('.gjs-sm-sectors').before(l),l.find('.gjs-sm-title').on('click',(function(){var e=c.get(0).style,t='none'===e.display;e.display=t?'block':'none'})),c.get(0).style.display='block';var d=e.Panels.getButton('views','open-blocks');d&&d.set('active',1)}))},p=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.BlockManager,o=t.getAll();o.forEach((function(e){e.set({category:'Blocks'})})),void 0!==t.get('mj-1-column')&&t.get('mj-1-column').set({category:'Sections'}),void 0!==t.get('mj-2-columns')&&t.get('mj-2-columns').set({category:'Sections'}),void 0!==t.get('mj-3-columns')&&t.get('mj-3-columns').set({category:'Sections'}),void 0!==t.get('sect100')&&t.get('sect100').set({category:'Sections'}),void 0!==t.get('sect50')&&t.get('sect50').set({category:'Sections'}),void 0!==t.get('sect30')&&t.get('sect30').set({category:'Sections'}),void 0!==t.get('sect37')&&t.get('sect37').set({category:'Sections'}),void 0!==t.get('column1')&&t.get('column1').set({category:'Sections'}),void 0!==t.get('column2')&&t.get('column2').set({category:'Sections'}),void 0!==t.get('column3')&&t.get('column3').set({category:'Sections'}),void 0!==t.get('column3-7')&&t.get('column3-7').set({category:'Sections'}),void 0!==t.get('mj-hero')&&t.get('mj-hero').set({attributes:{class:'gjs-fonts gjs-f-hero'}}),void 0!==t.get('mj-wrapper')&&t.remove('mj-wrapper')};function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){r()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=mQuery,n=e.AssetManager,r=e.getConfig(),i=g({sourceEdit:1,sourceEditBtnLabel:'Edit',sourceEditModalTitle:'Edit code',deleteAssetConfirmText:'Are you sure?',showLayersManager:0,showImportButton:0,mjmlTemplate:!1,replaceRteWithFroala:!0},t);if(r.plugins.includes('grapesjs-mjml')&&(i.mjmlTemplate=!0),n.addType('image',{view:{onRemove:function(e){e.stopImmediatePropagation();var t=this.model;confirm(i.deleteAssetConfirmText)&&t.collection.remove(t)}}}),i.replaceRteWithFroala&&void 0!==o.FroalaEditor){var a=e.RichTextEditor.getToolbarEl();[].forEach.call(a.children,(function(e){e.style.display='none'})),e.setCustomRte({enable:function(t,n){return n=o(t).froalaEditor({enter:o.FroalaEditor.ENTER_BR,pastePlain:!0,htmlAllowedTags:['a','abbr','address','area','article','aside','audio','b','base','bdi','bdo','blockquote','br','button','canvas','caption','cite','code','col','colgroup','datalist','dd','del','details','dfn','dialog','div','dl','dt','em','embed','fieldset','figcaption','figure','footer','form','h1','h2','h3','h4','h5','h6','header','hgroup','hr','i','iframe','img','input','ins','kbd','keygen','label','legend','li','link','main','map','mark','menu','menuitem','meter','nav','noscript','object','ol','optgroup','option','output','p','param','pre','progress','queue','rp','rt','ruby','s','samp','script','style','section','select','small','source','span','strike','strong','sub','summary','sup','table','tbody','td','textarea','tfoot','th','thead','time','title','tr','track','u','ul','var','video','wbr','center'],htmlAllowedAttrs:['data-atwho-at-query','data-section','data-section-wrapper','accept','accept-charset','accesskey','action','align','allowfullscreen','alt','async','autocomplete','autofocus','autoplay','autosave','background','bgcolor','border','charset','cellpadding','cellspacing','checked','cite','class','color','cols','colspan','content','contenteditable','contextmenu','controls','coords','data','data-.*','datetime','default','defer','dir','dirname','disabled','download','draggable','dropzone','enctype','for','form','formaction','frameborder','headers','height','hidden','high','href','hreflang','http-equiv','icon','id','ismap','itemprop','keytype','kind','label','lang','language','list','loop','low','max','maxlength','media','method','min','mozallowfullscreen','multiple','name','novalidate','open','optimum','pattern','ping','placeholder','poster','preload','pubdate','radiogroup','readonly','rel','required','reversed','rows','rowspan','sandbox','scope','scoped','scrolling','seamless','selected','shape','size','sizes','span','src','srcdoc','srclang','srcset','start','step','summary','spellcheck','style','tabindex','target','title','type','translate','usemap','value','valign','webkitallowfullscreen','width','wrap'],toolbarButtons:['bold','italic','underline','strikeThrough','quote','clearFormatting','-','formatOL','formatUL','indent','outdent','token','insertLink'],toolbarContainer:e.RichTextEditor.getToolbarEl(),linkEditButtons:['linkOpen','linkRemove']}),o(t).on('froalaEditor.popups.show.link.edit',(function(e,n){var r=o(t).froalaEditor('link.get'),i=o(t).froalaEditor('popups.get','link.edit');if(void 0!==r){var a=r.getBoundingClientRect().top,s=o(r).outerHeight();i.css('top',parseInt(a)+parseInt(s)+35)}})),n},disable:function(e,t){o(e).off('froalaEditor.popups.show.link.edit'),o(e).froalaEditor('destroy')}})}d(e,i),u(e,i),p(e,i)}}])}));
//# sourceMappingURL=grapesjs-preset-mautic.min.js.map