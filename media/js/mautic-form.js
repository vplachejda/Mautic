(function(g){var h=document;var k=console;function b(){var m={};var c={closeButton:null,modal:null,overlay:null,defaults:{className:"fade-and-drop",closeButton:true,content:"",width:"600px",height:"480px",overlay:true}};var l={clickEvents:[]};var i={};var d={};i.startTime=function(){this._startTime=performance.now()};i.runTime=function(){this._endTime=performance.now();this._runtime=this._endTime-this._startTime;k.log("Execution time: "+this._runtime+" ms.")};l.initialize=function(){var o=/{mauticform([^}]+)}/g,r;while(r=o.exec(h.body.innerHTML)){var n=r[0];var q={data:{},params:""};var p=[];r[1].trim().split(/\s+/).forEach(function(s){var t=s.split("=");q.data[t[0]]=t[1];p.push(t[0]+"="+encodeURIComponent(t[1]))});p.push("html=1");q.params=p.join("&");q.data.replace=n;q.data.style=typeof(q.data.style)=="undefined"?"embed":q.data.style;if(m.debug()){k.log(q.data.style+" Mautic Form: "+n)}switch(q.data.style){case"modal":h.body.innerHTML=h.body.innerHTML.replace(n,"");l.clickEvents.push(q);break;case"embed":default:h.body.innerHTML=h.body.innerHTML.replace(n,this.createIframe(q).outerHTML);break}}this.bindClickEvents();i.runTime()};l.bindClickEvents=function(){if(m.debug()){k.log("binding modal click events")}for(var n in l.clickEvents){var o=l.clickEvents[n];h.querySelector(o.data.element).setAttribute("_mautic_form_index",n);h.querySelector(o.data.element).addEventListener("click",function(){if(m.debug()){k.log("add event to "+o.data.element)}l.openModal(l.clickEvents[this.getAttribute("_mautic_form_index")])})}};l.openModal=function(n){m.openModal({content:l.createIframe(n,true).outerHTML,width:typeof(n.data.width)!="undefined"?n.data.width:"600px",height:typeof(n.data.height)!="undefined"?n.data.height:"480px"})};l.getFormLink=function(o){var n=(m.debug())?"index_dev.php":"index.php";return m.getMauticBaseUrl()+n+"/p/form/?"+o.params};l.createIframe=function(n,p){var p=(typeof(p)=="undefined")?false:true;var o=h.createElement("iframe");o.frameBorder=typeof(n.data.border)!="undefined"?parseInt(n.data.border):"0";o.width=(p)?"100%":typeof(n.data.width)!="undefined"?n.data.width:"600px";o.height=(p)?"100%":typeof(n.data.height)!="undefined"?n.data.height:"400px";o.className=(typeof(n.data["class"])=="string")?n.data["class"]:"";o.src=this.getFormLink(n);return o};c.loadStyle=function(){if(typeof(d.modal_css)!="undefined"){if(m.debug()){k.log("custom modal css style")}return}var n=h.createElement("link");n.rel="stylesheet";n.type="text/css";n.href=m.debug()?m.getMauticBaseUrl()+"media/css/modal.css":m.getMauticBaseUrl()+"media/css/modal.min.css";h.head.appendChild(n)};c.open=function(){if(arguments[0]&&typeof arguments[0]==="object"){this.options=this.extendDefaults(this.defaults,arguments[0])}this.buildOut();this.initializeEvents();g.getComputedStyle(this.modal).height;this.modal.className=this.modal.className+(this.modal.offsetHeight>g.innerHeight?" mauticForm-open mauticForm-anchored":" mauticForm-open");this.overlay.className=this.overlay.className+" mauticForm-open"};c.buildOut=function(){var o,p,n;o=typeof(this.options.content)=="string"?this.options.content:this.options.content.innerHTML;n=h.createDocumentFragment();this.modal=h.createElement("div");this.modal.className="mauticForm-modal "+this.options.className;this.modal.style.width=this.options.width;this.modal.style.height=this.options.height;if(this.options.closeButton===true){this.closeButton=h.createElement("button");this.closeButton.className="mauticForm-close close-button";this.closeButton.innerHTML="&times;";this.modal.appendChild(this.closeButton)}if(this.options.overlay===true){this.overlay=h.createElement("div");this.overlay.className="mauticForm-overlay "+this.options.className;n.appendChild(this.overlay)}p=h.createElement("div");p.className="mauticForm-content";p.innerHTML=o;this.modal.appendChild(p);n.appendChild(this.modal);h.body.appendChild(n)};c.extendDefaults=function(p,n){for(var o in n){if(n.hasOwnProperty(o)){p[o]=n[o]}}return p};c.initializeEvents=function(){if(this.closeButton){this.closeButton.addEventListener("click",this.close.bind(this))}if(this.overlay){this.overlay.addEventListener("click",this.close.bind(this))}};c.transitionSelect=function(){var n=h.createElement("div");return(n.style.WebkitTransition)?"webkitTransitionEnd":(n.style.WebkitTransition)?"webkitTransitionEnd":"oTransitionEnd"};c.close=function(){var n=this;this.modal.className=this.modal.className.replace(" mauticForm-open","");this.overlay.className=this.overlay.className.replace(" mauticForm-open","");this.modal.addEventListener(this.transitionSelect(),function(){n.modal.parentNode.removeChild(n.modal)});this.overlay.addEventListener(this.transitionSelect(),function(){if(n.overlay.parentNode){n.overlay.parentNode.removeChild(n.overlay)}})};m.parseToObject=function(n){return JSON.parse('{"'+decodeURI(n.trim().replace(/&/g,'","').replace(/=/g,'":"'))+'"}')};m.setConfig=function(n){d=n};m.getConfig=function(){return d};m.debug=function(){return typeof(d.debug)!="undefined"?true:false};m.setMauticBaseUrl=function(n){d.mautic_base_url=n.split("/").slice(0,-3).join("/")+"/"};m.getMauticBaseUrl=function(){return d.mautic_base_url};m.initialize=function(n){i.startTime();if(m.debug()){k.log("SDK initialized")}if(typeof(d.mautic_base_url)=="undefined"){m.setMauticBaseUrl(n)}if(m.debug()){k.log("Automatic setup mautic_base_url as: "+d.mautic_base_url)}c.loadStyle();h.addEventListener("DOMContentLoaded",function(o){if(m.debug()){k.log("DOM is ready")}l.initialize()})};m.openModal=function(n){c.open(n)};return m}if(typeof(MauticSDK)==="undefined"){g.MauticSDK=b();var j=h.getElementsByTagName("script"),f=j.length;for(var e=0;e<j.length;e++){if(!j[e].hasAttribute("src")||j[e].getAttribute("src").indexOf("mautic-form.js")==-1){continue}var a=j[e].getAttribute("src").split("?");if(a[1]){MauticSDK.setConfig(MauticSDK.parseToObject(a[1]))}MauticSDK.initialize(a[0]);break}}})(window);