(function(e){function b(){var k={};var g={closeButton:null,modal:null,overlay:null,defaults:{className:"fade-and-drop",closeButton:true,content:"",width:"600px",height:"480px",overlay:true}};var j={clickEvents:[]};var i={};var h={devmode:false,debug:false};i.startTime=function(){this._startTime=performance.now()};i.runTime=function(){this._endTime=performance.now();this._runtime=this._endTime-this._startTime;if(k.debug()){console.log("Execution time: "+this._runtime+" ms.")}};j.initialize=function(){var m=/{mauticform([^}]+)}/g,p;while(p=m.exec(document.body.innerHTML)){var l=p[0];var o={data:{},params:""};var n=[];p[1].trim().split(/\s+/).forEach(function(q){var r=q.split("=");o.data[r[0]]=r[1];if(r[0]!="id"){n.push(r[0]+"="+encodeURIComponent(r[1]))}});n.push("html=1");o.params=n.join("&");o.data.replace=l;o.data.style=typeof(o.data.style)=="undefined"?"embed":o.data.style;if(k.debug()){console.log(o.data.style+" Mautic Form: "+l)}switch(o.data.style){case"modal":document.body.innerHTML=document.body.innerHTML.replace(l,"");j.clickEvents.push(o);break;case"embed":default:document.body.innerHTML=document.body.innerHTML.replace(l,this.createIframe(o).outerHTML);break}}this.bindClickEvents();i.runTime()};j.bindClickEvents=function(){if(k.debug()){console.log("binding modal click events")}for(var l in j.clickEvents){var m=j.clickEvents[l];document.querySelector(m.data.element).setAttribute("_mautic_form_index",l);document.querySelector(m.data.element).addEventListener("click",function(){if(k.debug()){console.log("add event to "+m.data.element)}j.openModal(j.clickEvents[this.getAttribute("_mautic_form_index")])})}};j.openModal=function(l){k.openModal({content:j.createIframe(l,true).outerHTML,width:typeof(l.data.width)!="undefined"?l.data.width:"600px",height:typeof(l.data.height)!="undefined"?l.data.height:"480px"})};j.getFormLink=function(m){var l=(k.devMode())?"index_dev.php":"index.php";return k.getMauticBaseUrl()+l+"/form/"+m.data.id+"?"+m.params};j.createIframe=function(l,n){var n=(typeof(n)=="undefined")?false:true;var m=document.createElement("iframe");m.frameBorder=typeof(l.data.border)!="undefined"?parseInt(l.data.border):"0";m.width=(n)?"100%":typeof(l.data.width)!="undefined"?l.data.width:"600px";m.height=(n)?"100%":typeof(l.data.height)!="undefined"?l.data.height:"400px";m.className=(typeof(l.data["class"])=="string")?l.data["class"]:"";m.src=this.getFormLink(l);return m};g.loadStyle=function(){if(typeof(h.modal_css)!="undefined"&&parseInt(h.modal_css)!="Nan"&&h.modal_css==0){if(k.debug()){console.log("custom modal css style")}return}var l=document.createElement("link");l.rel="stylesheet";l.type="text/css";l.href=k.debug()?k.getMauticBaseUrl()+"media/css/modal.css":k.getMauticBaseUrl()+"media/css/modal.min.css";document.head.appendChild(l);if(k.debug()){console.log(l)}};g.open=function(){if(arguments[0]&&typeof arguments[0]==="object"){this.options=this.extendDefaults(this.defaults,arguments[0])}this.buildOut();this.initializeEvents();e.getComputedStyle(this.modal).height;this.modal.className=this.modal.className+(this.modal.offsetHeight>e.innerHeight?" mauticForm-open mauticForm-anchored":" mauticForm-open");this.overlay.className=this.overlay.className+" mauticForm-open"};g.buildOut=function(){var m,n,l;m=typeof(this.options.content)=="string"?this.options.content:this.options.content.innerHTML;l=document.createDocumentFragment();this.modal=document.createElement("div");this.modal.className="mauticForm-modal "+this.options.className;this.modal.style.width=this.options.width;this.modal.style.height=this.options.height;if(this.options.closeButton===true){this.closeButton=document.createElement("button");this.closeButton.className="mauticForm-close close-button";this.closeButton.innerHTML="&times;";this.modal.appendChild(this.closeButton)}if(this.options.overlay===true){this.overlay=document.createElement("div");this.overlay.className="mauticForm-overlay "+this.options.className;l.appendChild(this.overlay)}n=document.createElement("div");n.className="mauticForm-content";n.innerHTML=m;this.modal.appendChild(n);l.appendChild(this.modal);document.body.appendChild(l)};g.extendDefaults=function(n,l){for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}return n};g.initializeEvents=function(){if(this.closeButton){this.closeButton.addEventListener("click",this.close.bind(this))}if(this.overlay){this.overlay.addEventListener("click",this.close.bind(this))}};g.transitionSelect=function(){var l=document.createElement("div");return(l.style.WebkitTransition)?"webkitTransitionEnd":(l.style.WebkitTransition)?"webkitTransitionEnd":"oTransitionEnd"};g.close=function(){var l=this;this.modal.className=this.modal.className.replace(" mauticForm-open","");this.overlay.className=this.overlay.className.replace(" mauticForm-open","");this.modal.addEventListener(this.transitionSelect(),function(){l.modal.parentNode.removeChild(l.modal)});this.overlay.addEventListener(this.transitionSelect(),function(){if(l.overlay.parentNode){l.overlay.parentNode.removeChild(l.overlay)}});this.overlay.parentNode.removeChild(this.overlay);this.modal.parentNode.removeChild(this.modal)};k.parseToObject=function(l){return JSON.parse('{"'+decodeURI(l.trim().replace(/&/g,'","').replace(/=/g,'":"'))+'"}')};k.setConfig=function(l){h=l};k.getConfig=function(){return h};k.debug=function(){return(typeof(h.debug)!="undefined"&&parseInt(h.debug)!="Nan"&&h.debug==1)?true:false};k.devMode=function(){return(typeof(h.devmode)!="undefined"&&parseInt(h.devmode)!="Nan"&&h.devmode==1)?true:false};k.setMauticBaseUrl=function(l){h.mautic_base_url=l.split("/").slice(0,-3).join("/")+"/"};k.getMauticBaseUrl=function(){return h.mautic_base_url};k.initialize=function(l){i.startTime();if(k.debug()){console.log("SDK initialized")}if(typeof(h.mautic_base_url)=="undefined"){k.setMauticBaseUrl(l)}if(k.debug()){console.log("Automatic setup mautic_base_url as: "+h.mautic_base_url)}g.loadStyle();document.addEventListener("DOMContentLoaded",function(m){if(k.debug()){console.log("DOM is ready")}j.initialize()})};k.openModal=function(l){g.open(l)};return k}if(typeof(MauticSDK)==="undefined"){e.MauticSDK=b();var f=document.getElementsByTagName("script"),d=f.length;for(var c=0;c<f.length;c++){if(!f[c].hasAttribute("src")||f[c].getAttribute("src").indexOf("mautic-form.js")==-1){continue}var a=f[c].getAttribute("src").split("?");if(a[1]){MauticSDK.setConfig(MauticSDK.parseToObject(a[1]))}MauticSDK.initialize(a[0]);break}}})(window);
