{% set request = app.request %}
{% set contentOnly = request.get('contentOnly', false) or (contentOnly is defined and contentOnly is not empty) %}
{% set modalView = request.get('modal', false) or (modalView is defined and modalView is not empty) %}
{% set isAjax = app.request.isxmlhttprequest ?? false %}
{% set template = contentOnly ? 'MauticCoreBundle:Default:slim.html.twig' : 'MauticCoreBundle:Default:base.html.twig' %}

{% if isAjax == false and not modalView %}
    {# load base template #}
    {% if template is not empty %}{% extends template %}{% endif %}
{% endif %}

{% block _content %}
    {% if not modalView %}
        <div class="content-body">
            {{ include('MauticCoreBundle:Default:pageheader.html.twig', {
                publishStatus: publishStatus|default(''),
                headerTitle: block('headerTitle') is defined ? block('headerTitle') : '',
                actions: block('actions') is defined ? block('actions') : '',
                toolbar: block('toolbar') is defined ? block('toolbar') : '',
                mauticTemplateVars: mauticTemplateVars|default([]),
            }) }}
            
            {% if block('content') is defined %}
                {{ block('content') }}
            {% endif %}
        </div>
        {% block modal %}{% endblock %}
        {{ securityGetAuthenticationContext() }}
    {% else %}
        {% if block('content') is defined %}{{ block('content') }}{% endif %}
    {% endif %}
{% endblock %}
